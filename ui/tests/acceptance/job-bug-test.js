/* eslint-disable qunit/require-expect */
import { currentRouteName, visit } from '@ember/test-helpers';
import { module, test } from 'qunit';
import { setupApplicationTest } from 'ember-qunit';
import { setupMirage } from 'ember-cli-mirage/test-support';
import a11yAudit from 'nomad-ui/tests/helpers/a11y-audit';
import percySnapshot from '@percy/ember';

const getStandardRes = async () =>
  fetch('http://localhost:8080/pablo').then((res) => res.json());

const getNamespace = () => [
  {
    Name: 'default',
    Description: 'Default shared namespace',
    Quota: '',
    Capabilities: null,
    Meta: null,
    Hash: 'C7UbjDwBK0dK8wQq7Izg7SJIzaV+lIo2X7wRtzY3pSw=',
    CreateIndex: 1,
    ModifyIndex: 1,
  },
];

const getAllocations = () => [
  {
    ID: '0b9c9a4f-0bda-cf7b-c390-1ede15882fa0',
    EvalID: '7d58cc89-e35b-1a9d-84c3-b8f31685eafb',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-redis[0]',
    Namespace: 'default',
    NodeID: 'e70c04d5-318c-ce97-261c-4b6982095383',
    NodeName: 'i-0fc29509bf7c52dc3',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-redis',
    AllocatedResources: null,
    DesiredStatus: 'stop',
    DesiredDescription: 'alloc is being migrated',
    ClientStatus: 'complete',
    ClientDescription: 'All tasks have completed',
    DesiredTransition: {
      Migrate: true,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-redis': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:37:48.113495391Z',
        FinishedAt: '2022-10-05T17:40:44.367163708Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664991462232514800,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991465458532000,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664991467279711000,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/redis-envoy:v1',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991468113491700,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991633074941700,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991644352907800,
            Message: '',
            DisplayMessage: 'Exit Code: 0',
            Details: {
              exit_code: '0',
              signal: '0',
              oom_killed: 'false',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991644365405200,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-05T17:38:21.467585272Z',
      Canary: false,
      ModifyIndex: 813950281,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 813949325,
    ModifyIndex: 813955071,
    CreateTime: 1664991442118362400,
    ModifyTime: 1664991645566177500,
  },
  {
    ID: '18ecfe7f-42cd-195e-5c6b-125af6309a3d',
    EvalID: 'c1854702-a8a7-3baa-2b40-9d860446493c',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-s3[0]',
    Namespace: 'default',
    NodeID: '30a6fcff-8809-b522-5771-c149bf7767ab',
    NodeName: 'i-0a35043b02c1c3f47',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-s3',
    AllocatedResources: null,
    DesiredStatus: 'run',
    DesiredDescription: '',
    ClientStatus: 'running',
    ClientDescription: 'Tasks are running',
    DesiredTransition: {
      Migrate: null,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-s3-proxy': {
        State: 'running',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:43:09.561868017Z',
        FinishedAt: null,
        Events: [
          {
            Type: 'Received',
            Time: 1664991758602698500,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991777519407000,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664991777659372500,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/envoy-sidecar:v0.53.0',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991789561864400,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
      'mikecorns-agg-report-infra-s3': {
        State: 'running',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:43:57.793827978Z',
        FinishedAt: null,
        Events: [
          {
            Type: 'Received',
            Time: 1664991758601990700,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991789573213200,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664991794939516400,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/minio-s3:v0',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991837793824500,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-05T17:44:14.11084697Z',
      Canary: false,
      ModifyIndex: 813959515,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 813957169,
    ModifyIndex: 813959515,
    CreateTime: 1664991758459206400,
    ModifyTime: 1664991854230027800,
  },
  {
    ID: 'b323a894-5f39-4ec0-44ef-518050879fe8',
    EvalID: '1f4f7e82-f43f-1123-eb9c-d17697c11b5b',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-s3[0]',
    Namespace: 'default',
    NodeID: '9f55cee3-8804-f113-059a-d4bce293a422',
    NodeName: 'i-0e24ba4d1d2e063b8',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-s3',
    AllocatedResources: null,
    DesiredStatus: 'stop',
    DesiredDescription: 'alloc is being migrated',
    ClientStatus: 'complete',
    ClientDescription: 'All tasks have completed',
    DesiredTransition: {
      Migrate: true,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-s3': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-03T14:40:00.358376195Z',
        FinishedAt: '2022-10-05T17:38:12.497677666Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664807936659959300,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664807998554578200,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664807999141005000,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/minio-s3:v0',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664808000358371300,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991452313938700,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991492476572000,
            Message: 'Docker container exited with non-zero exit code: 137',
            DisplayMessage:
              'Exit Code: 137, Exit Message: "Docker container exited with non-zero exit code: 137"',
            Details: {
              signal: '0',
              oom_killed: 'false',
              exit_message:
                'Docker container exited with non-zero exit code: 137',
              exit_code: '137',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 137,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991492493993500,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991502501813500,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
      'mikecorns-agg-report-infra-s3-proxy': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-03T14:39:58.550664919Z',
        FinishedAt: '2022-10-05T17:38:22.664487848Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664807936660681700,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664807997981525500,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664807998550662100,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Leader Task Dead',
            Time: 1664991492499422200,
            Message: '',
            DisplayMessage: 'Leader Task in Group dead',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991492501034000,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991502503319300,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991502648062200,
            Message: '',
            DisplayMessage: 'Exit Code: 0',
            Details: {
              exit_code: '0',
              signal: '0',
              oom_killed: 'false',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991502662062600,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-03T14:40:28.12143823Z',
      Canary: false,
      ModifyIndex: 809538900,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 809537214,
    ModifyIndex: 813954160,
    CreateTime: 1664807936640442000,
    ModifyTime: 1664991503181469700,
  },
  {
    ID: 'd9582fb7-93d0-f208-382d-a2e985881af2',
    EvalID: '7d58cc89-e35b-1a9d-84c3-b8f31685eafb',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-s3[0]',
    Namespace: 'default',
    NodeID: 'e70c04d5-318c-ce97-261c-4b6982095383',
    NodeName: 'i-0fc29509bf7c52dc3',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-s3',
    AllocatedResources: null,
    DesiredStatus: 'stop',
    DesiredDescription: 'alloc is being migrated',
    ClientStatus: 'complete',
    ClientDescription: 'All tasks have completed',
    DesiredTransition: {
      Migrate: true,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-s3': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:38:26.531793604Z',
        FinishedAt: '2022-10-05T17:41:13.277143336Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664991462234685400,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991504657184800,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664991505683319600,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/minio-s3:v0',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991506531790300,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991633104554200,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991673265299500,
            Message: 'Docker container exited with non-zero exit code: 137',
            DisplayMessage:
              'Exit Code: 137, Exit Message: "Docker container exited with non-zero exit code: 137"',
            Details: {
              signal: '0',
              oom_killed: 'false',
              exit_message:
                'Docker container exited with non-zero exit code: 137',
              exit_code: '137',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 137,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991673275392500,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991683280696300,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
      'mikecorns-agg-report-infra-s3-proxy': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:38:24.654160282Z',
        FinishedAt: '2022-10-05T17:41:23.444865245Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664991462235070000,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991504162332700,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991504654155800,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Leader Task Dead',
            Time: 1664991673278749200,
            Message: '',
            DisplayMessage: 'Leader Task in Group dead',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991673280073500,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991683282199300,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991683434867700,
            Message: '',
            DisplayMessage: 'Exit Code: 0',
            Details: {
              exit_code: '0',
              signal: '0',
              oom_killed: 'false',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991683443592700,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-05T17:38:53.843483337Z',
      Canary: false,
      ModifyIndex: 813951027,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 813949325,
    ModifyIndex: 813955962,
    CreateTime: 1664991442118362400,
    ModifyTime: 1664991684106529300,
  },
  {
    ID: 'f14dd222-0161-6565-19a4-88e226cd57ed',
    EvalID: 'c1854702-a8a7-3baa-2b40-9d860446493c',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-redis[0]',
    Namespace: 'default',
    NodeID: '30a6fcff-8809-b522-5771-c149bf7767ab',
    NodeName: 'i-0a35043b02c1c3f47',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-redis',
    AllocatedResources: null,
    DesiredStatus: 'run',
    DesiredDescription: '',
    ClientStatus: 'running',
    ClientDescription: 'Tasks are running',
    DesiredTransition: {
      Migrate: null,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-redis': {
        State: 'running',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-05T17:43:58.725741671Z',
        FinishedAt: null,
        Events: [
          {
            Type: 'Received',
            Time: 1664991758606087000,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664991782283707600,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664991783145818000,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/redis-envoy:v1',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664991838725720600,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-05T17:44:37.11028551Z',
      Canary: false,
      ModifyIndex: 813959783,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 813957169,
    ModifyIndex: 813959783,
    CreateTime: 1664991758459206400,
    ModifyTime: 1664991877212350700,
  },
  {
    ID: 'f98cb28e-f32f-f014-387c-92ac70be768e',
    EvalID: '1f4f7e82-f43f-1123-eb9c-d17697c11b5b',
    Name: 'mikecorns-agg-report-infra.mikecorns-agg-report-infra-redis[0]',
    Namespace: 'default',
    NodeID: '9f55cee3-8804-f113-059a-d4bce293a422',
    NodeName: 'i-0e24ba4d1d2e063b8',
    JobID: 'mikecorns-agg-report-infra',
    JobType: 'service',
    JobVersion: 1,
    TaskGroup: 'mikecorns-agg-report-infra-redis',
    AllocatedResources: null,
    DesiredStatus: 'stop',
    DesiredDescription: 'alloc is being migrated',
    ClientStatus: 'complete',
    ClientDescription: 'All tasks have completed',
    DesiredTransition: {
      Migrate: true,
      Reschedule: null,
      ForceReschedule: null,
      NoShutdownDelay: null,
    },
    TaskStates: {
      'mikecorns-agg-report-infra-redis': {
        State: 'dead',
        Failed: false,
        Restarts: 0,
        LastRestart: null,
        StartedAt: '2022-10-03T14:39:20.958417945Z',
        FinishedAt: '2022-10-05T17:37:43.699227764Z',
        Events: [
          {
            Type: 'Received',
            Time: 1664807936663880400,
            Message: '',
            DisplayMessage: 'Task received by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Task Setup',
            Time: 1664807959392492300,
            Message: 'Building Task Directory',
            DisplayMessage: 'Building Task Directory',
            Details: {
              message: 'Building Task Directory',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Driver',
            Time: 1664807959890456300,
            Message: '',
            DisplayMessage: 'Downloading image',
            Details: {
              image: 'registry.dreambox.net/redis-envoy:v1',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: 'Downloading image',
            GenericSource: '',
          },
          {
            Type: 'Started',
            Time: 1664807960958415000,
            Message: '',
            DisplayMessage: 'Task started by client',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killing',
            Time: 1664991452205140200,
            Message: '',
            DisplayMessage: 'Sent interrupt. Waiting 30s before force killing',
            Details: {
              kill_timeout: '30s',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 30000000000,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Terminated',
            Time: 1664991463671186000,
            Message: '',
            DisplayMessage: 'Exit Code: 0',
            Details: {
              exit_code: '0',
              signal: '0',
              oom_killed: 'false',
            },
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
          {
            Type: 'Killed',
            Time: 1664991463694891800,
            Message: '',
            DisplayMessage: 'Task successfully killed',
            Details: {},
            FailsTask: false,
            RestartReason: '',
            SetupError: '',
            DriverError: '',
            ExitCode: 0,
            Signal: 0,
            KillTimeout: 0,
            KillError: '',
            KillReason: '',
            StartDelay: 0,
            DownloadError: '',
            ValidationError: '',
            DiskLimit: 0,
            FailedSibling: '',
            VaultError: '',
            TaskSignalReason: '',
            TaskSignal: '',
            DriverMessage: '',
            GenericSource: '',
          },
        ],
        TaskHandle: null,
      },
    },
    DeploymentStatus: {
      Healthy: true,
      Timestamp: '2022-10-03T14:39:46.251464355Z',
      Canary: false,
      ModifyIndex: 809537862,
    },
    FollowupEvalID: '',
    RescheduleTracker: null,
    PreemptedAllocations: null,
    PreemptedByAllocation: '',
    CreateIndex: 809537214,
    ModifyIndex: 813954160,
    CreateTime: 1664807936640442000,
    ModifyTime: 1664991464953350000,
  },
];

const getJob = () => ({
  Stop: false,
  Region: 'us-west-2',
  Namespace: 'default',
  ID: 'mikecorns-agg-report-infra',
  ParentID: '',
  Name: 'mikecorns-agg-report-infra',
  Type: 'service',
  Priority: 50,
  AllAtOnce: false,
  Datacenters: ['sandbox'],
  Constraints: null,
  Affinities: null,
  Spreads: null,
  TaskGroups: [
    {
      Name: 'mikecorns-agg-report-infra-redis',
      Count: 1,
      Update: {
        Stagger: 30000000000,
        MaxParallel: 1,
        HealthCheck: 'checks',
        MinHealthyTime: 10000000000,
        HealthyDeadline: 180000000000,
        ProgressDeadline: 540000000000,
        AutoRevert: true,
        AutoPromote: false,
        Canary: 0,
      },
      Migrate: {
        MaxParallel: 1,
        HealthCheck: 'checks',
        MinHealthyTime: 10000000000,
        HealthyDeadline: 300000000000,
      },
      Constraints: [
        {
          LTarget: '${node.class}',
          RTarget: 'infra',
          Operand: '=',
        },
        {
          LTarget: '${attr.vault.version}',
          RTarget: '>= 0.6.1',
          Operand: 'semver',
        },
        {
          LTarget: '${attr.os.signals}',
          RTarget: 'SIGINT',
          Operand: 'set_contains',
        },
        {
          LTarget: '${attr.consul.version}',
          RTarget: '>= 1.7.0',
          Operand: 'semver',
        },
      ],
      Scaling: null,
      RestartPolicy: {
        Attempts: 0,
        Interval: 180000000000,
        Delay: 1000000000,
        Mode: 'fail',
      },
      Tasks: [
        {
          Name: 'mikecorns-agg-report-infra-redis',
          Driver: 'docker',
          User: '',
          Config: {
            logging: [
              {
                config: [
                  {
                    'syslog-address':
                      'udp://${attr.unique.network.ip-address}:514',
                    'syslog-format': 'rfc5424micro',
                    tag: 'mikecorns_agg-report-infra-redis_registry.dreambox.net/redis-envoy:v1_${NOMAD_ALLOC_ID}_{{.ID}}',
                  },
                ],
                driver: 'syslog',
              },
            ],
            image: 'registry.dreambox.net/redis-envoy:v1',
            force_pull: true,
            ulimit: [
              {
                nofile: '100000:100000',
              },
            ],
            sysctl: [
              {
                'net.core.somaxconn': '128',
              },
            ],
          },
          Env: {
            SERVICE_NAME: 'agg-report-infra-redis',
            SERVICE_PORT: '16579',
            LISTENER_PROTOCOL: 'tcp',
            NAMESPACE: 'mikecorns',
            XDS_ADDRESS: '${attr.unique.network.ip-address}',
            ENVOY_ARGS: '-l info',
            NODE_ID: 'agg-report-infra-redis-${NOMAD_ALLOC_ID}',
          },
          Services: null,
          Vault: {
            Policies: ['mikecorns-sandbox-agg-report-infra-redis'],
            Namespace: '',
            Env: true,
            ChangeMode: 'restart',
            ChangeSignal: 'SIGHUP',
          },
          Templates: null,
          Constraints: null,
          Affinities: null,
          Resources: {
            CPU: 100,
            Cores: 0,
            MemoryMB: 1512,
            MemoryMaxMB: 0,
            DiskMB: 0,
            IOPS: 0,
            Networks: null,
            Devices: null,
          },
          RestartPolicy: {
            Attempts: 0,
            Interval: 180000000000,
            Delay: 1000000000,
            Mode: 'fail',
          },
          DispatchPayload: null,
          Lifecycle: null,
          Meta: {
            StackServiceName: 'agg-report-infra-redis',
            namespace: 'mikecorns',
            Purpose: 'service',
          },
          KillTimeout: 30000000000,
          LogConfig: {
            MaxFiles: 10,
            MaxFileSizeMB: 10,
          },
          Artifacts: null,
          Leader: false,
          ShutdownDelay: 10000000000,
          VolumeMounts: [
            {
              Volume: 'infra_default_efs',
              Destination: '/durable',
              ReadOnly: false,
              PropagationMode: 'private',
            },
          ],
          ScalingPolicies: null,
          KillSignal: 'SIGINT',
          Kind: '',
          CSIPluginConfig: null,
        },
      ],
      EphemeralDisk: {
        Sticky: true,
        SizeMB: 300,
        Migrate: true,
      },
      Meta: {
        GIT_REF: 'main',
        GIT_REPO_URL: 'git@bitbucket.org:dreamboxlearning/dbl-agg-report.git',
        STACK: 'agg-report-infra',
        bluegreen: 'false',
        namespace: 'mikecorns',
        deploy_time: '2022-10-03 14:38:56',
        GIT_COMMIT_SHA: '50e68df4b1305f10d8ebed942b07fcb7d0bce7df',
      },
      ReschedulePolicy: {
        Attempts: 0,
        Interval: 0,
        Delay: 15000000000,
        DelayFunction: 'exponential',
        MaxDelay: 300000000000,
        Unlimited: true,
      },
      Affinities: null,
      Spreads: [
        {
          Attribute: '${attr.unique.network.ip-address}',
          Weight: 50,
          SpreadTarget: null,
        },
      ],
      Networks: [
        {
          Mode: 'bridge',
          Device: '',
          CIDR: '',
          IP: '',
          Hostname: '',
          MBits: 10,
          DNS: null,
          ReservedPorts: null,
          DynamicPorts: [
            {
              Label: 'agg-report-infra-redis',
              Value: 0,
              To: 81,
              HostNetwork: 'default',
            },
          ],
        },
      ],
      Consul: {
        Namespace: '',
      },
      Services: [
        {
          Name: 'agg-report-infra-redis',
          TaskName: '',
          PortLabel: 'agg-report-infra-redis',
          AddressMode: 'auto',
          Address: '',
          EnableTagOverride: false,
          Tags: [
            'az:${meta.az}',
            'namespace:mikecorns',
            'internal',
            'envoy',
            'tcp:16579',
            'urlprefix-mikecorns-agg-report-infra-redis.sandbox.dev.dreambox.net/',
            'domain:mikecorns-agg-report-infra-redis.sandbox.dev.dreambox.net',
            'timeout:1m',
            'idle_timeout:1m',
          ],
          CanaryTags: null,
          Checks: [
            {
              Name: 'alive',
              Type: 'tcp',
              Command: '',
              Args: null,
              Path: '',
              Protocol: '',
              PortLabel: 'agg-report-infra-redis',
              Expose: false,
              AddressMode: '',
              Interval: 20000000000,
              Timeout: 3000000000,
              InitialStatus: 'warning',
              TLSSkipVerify: false,
              Method: '',
              Header: null,
              CheckRestart: {
                Limit: 3,
                Grace: 60000000000,
                IgnoreWarnings: true,
              },
              GRPCService: '',
              GRPCUseTLS: false,
              TaskName: '',
              SuccessBeforePassing: 0,
              FailuresBeforeCritical: 0,
              Body: '',
              OnUpdate: 'require_healthy',
            },
            {
              Name: 'redis-healthcheck',
              Type: 'script',
              Command: '/bin/bash',
              Args: ['-c', '/opt/redis/healthcheck.sh'],
              Path: '',
              Protocol: '',
              PortLabel: '',
              Expose: false,
              AddressMode: '',
              Interval: 15000000000,
              Timeout: 20000000000,
              InitialStatus: 'warning',
              TLSSkipVerify: false,
              Method: '',
              Header: null,
              CheckRestart: {
                Limit: 3,
                Grace: 60000000000,
                IgnoreWarnings: true,
              },
              GRPCService: '',
              GRPCUseTLS: false,
              TaskName: 'mikecorns-agg-report-infra-redis',
              SuccessBeforePassing: 0,
              FailuresBeforeCritical: 0,
              Body: '',
              OnUpdate: 'require_healthy',
            },
          ],
          Connect: null,
          Meta: {
            STACK: 'agg-report-infra',
            namespace: 'mikecorns',
            GIT_COMMIT_SHA: '50e68df4b1305f10d8ebed942b07fcb7d0bce7df',
            GIT_REF: 'main',
            GIT_REPO_URL:
              'git@bitbucket.org:dreamboxlearning/dbl-agg-report.git',
          },
          CanaryMeta: null,
          Namespace: 'default',
          OnUpdate: 'require_healthy',
          Provider: 'consul',
        },
      ],
      Volumes: {
        infra_default_efs: {
          Name: '',
          Type: 'host',
          Source: 'infra_default_efs',
          ReadOnly: false,
          AccessMode: '',
          AttachmentMode: '',
          MountOptions: null,
          PerAlloc: false,
        },
      },
      ShutdownDelay: 10000000000,
      StopAfterClientDisconnect: null,
      MaxClientDisconnect: null,
    },
    {
      Name: 'mikecorns-agg-report-infra-s3',
      Count: 1,
      Update: {
        Stagger: 30000000000,
        MaxParallel: 1,
        HealthCheck: 'checks',
        MinHealthyTime: 10000000000,
        HealthyDeadline: 180000000000,
        ProgressDeadline: 540000000000,
        AutoRevert: true,
        AutoPromote: false,
        Canary: 0,
      },
      Migrate: {
        MaxParallel: 1,
        HealthCheck: 'checks',
        MinHealthyTime: 10000000000,
        HealthyDeadline: 300000000000,
      },
      Constraints: [
        {
          LTarget: '${node.class}',
          RTarget: 'infra',
          Operand: '=',
        },
        {
          LTarget: '${attr.vault.version}',
          RTarget: '>= 0.6.1',
          Operand: 'semver',
        },
        {
          LTarget: '${attr.os.signals}',
          RTarget: 'SIGINT',
          Operand: 'set_contains',
        },
        {
          LTarget: '${attr.consul.version}',
          RTarget: '>= 1.7.0',
          Operand: 'semver',
        },
      ],
      Scaling: null,
      RestartPolicy: {
        Attempts: 0,
        Interval: 180000000000,
        Delay: 1000000000,
        Mode: 'fail',
      },
      Tasks: [
        {
          Name: 'mikecorns-agg-report-infra-s3',
          Driver: 'docker',
          User: '',
          Config: {
            force_pull: true,
            ulimit: [
              {
                nofile: '100000:100000',
              },
            ],
            sysctl: [
              {
                'net.core.somaxconn': '128',
              },
            ],
            logging: [
              {
                config: [
                  {
                    'syslog-format': 'rfc5424micro',
                    tag: 'mikecorns_agg-report-infra-s3_registry.dreambox.net/minio-s3:v0_${NOMAD_ALLOC_ID}_{{.ID}}',
                    'syslog-address':
                      'udp://${attr.unique.network.ip-address}:514',
                  },
                ],
                driver: 'syslog',
              },
            ],
            image: 'registry.dreambox.net/minio-s3:v0',
          },
          Env: {
            S3_DURABLE_DATA: 'true',
            DEFAULT_REGION: 'us-west-2',
            MINIO_ACCESS_KEY: 'admin',
            MINIO_PORT: '19200',
            MINIO_SECRET_KEY: 'password',
          },
          Services: null,
          Vault: {
            Policies: ['mikecorns-sandbox-agg-report-infra-s3'],
            Namespace: '',
            Env: true,
            ChangeMode: 'restart',
            ChangeSignal: 'SIGHUP',
          },
          Templates: null,
          Constraints: null,
          Affinities: null,
          Resources: {
            CPU: 512,
            Cores: 0,
            MemoryMB: 1512,
            MemoryMaxMB: 0,
            DiskMB: 0,
            IOPS: 0,
            Networks: null,
            Devices: null,
          },
          RestartPolicy: {
            Attempts: 0,
            Interval: 180000000000,
            Delay: 1000000000,
            Mode: 'fail',
          },
          DispatchPayload: null,
          Lifecycle: null,
          Meta: {
            namespace: 'mikecorns',
            Purpose: 'service',
            StackServiceName: 'agg-report-infra-s3',
          },
          KillTimeout: 30000000000,
          LogConfig: {
            MaxFiles: 10,
            MaxFileSizeMB: 10,
          },
          Artifacts: null,
          Leader: true,
          ShutdownDelay: 10000000000,
          VolumeMounts: [
            {
              Volume: 'infra_default_efs',
              Destination: '/durable',
              ReadOnly: false,
              PropagationMode: 'private',
            },
          ],
          ScalingPolicies: null,
          KillSignal: 'SIGINT',
          Kind: '',
          CSIPluginConfig: null,
        },
        {
          Name: 'mikecorns-agg-report-infra-s3-proxy',
          Driver: 'docker',
          User: '',
          Config: {
            image: 'registry.dreambox.net/envoy-sidecar:v0.53.0',
            ulimit: [
              {
                nofile: '100000:100000',
              },
            ],
            sysctl: [
              {
                'net.core.somaxconn': '128',
              },
            ],
            args: ['-l', 'warn'],
          },
          Env: {
            NAMESPACE: 'mikecorns',
            XDS_ADDRESS: '${attr.unique.network.ip-address}',
            NODE_ID: 'agg-report-infra-s3-${NOMAD_ALLOC_ID}-proxy',
            SERVICE_NAME: 'agg-report-infra-s3',
            SERVICE_PORT: '19200',
            LISTENER_PROTOCOL: 'http',
          },
          Services: null,
          Vault: null,
          Templates: null,
          Constraints: null,
          Affinities: null,
          Resources: {
            CPU: 250,
            Cores: 0,
            MemoryMB: 250,
            MemoryMaxMB: 0,
            DiskMB: 0,
            IOPS: 0,
            Networks: null,
            Devices: null,
          },
          RestartPolicy: {
            Attempts: 0,
            Interval: 180000000000,
            Delay: 1000000000,
            Mode: 'fail',
          },
          DispatchPayload: null,
          Lifecycle: {
            Hook: 'prestart',
            Sidecar: true,
          },
          Meta: {
            purpose: 'proxy',
            namespace: 'mikecorns',
          },
          KillTimeout: 30000000000,
          LogConfig: {
            MaxFiles: 10,
            MaxFileSizeMB: 10,
          },
          Artifacts: null,
          Leader: false,
          ShutdownDelay: 10000000000,
          VolumeMounts: null,
          ScalingPolicies: null,
          KillSignal: '',
          Kind: '',
          CSIPluginConfig: null,
        },
      ],
      EphemeralDisk: {
        Sticky: true,
        SizeMB: 300,
        Migrate: true,
      },
      Meta: {
        GIT_REPO_URL: 'git@bitbucket.org:dreamboxlearning/dbl-agg-report.git',
        STACK: 'agg-report-infra',
        bluegreen: 'false',
        namespace: 'mikecorns',
        deploy_time: '2022-10-03 14:38:56',
        GIT_COMMIT_SHA: '50e68df4b1305f10d8ebed942b07fcb7d0bce7df',
        GIT_REF: 'main',
      },
      ReschedulePolicy: {
        Attempts: 0,
        Interval: 0,
        Delay: 15000000000,
        DelayFunction: 'exponential',
        MaxDelay: 300000000000,
        Unlimited: true,
      },
      Affinities: null,
      Spreads: [
        {
          Attribute: '${attr.unique.network.ip-address}',
          Weight: 50,
          SpreadTarget: null,
        },
      ],
      Networks: [
        {
          Mode: 'bridge',
          Device: '',
          CIDR: '',
          IP: '',
          Hostname: '',
          MBits: 10,
          DNS: null,
          ReservedPorts: null,
          DynamicPorts: [
            {
              Label: 'agg-report-infra-s3-proxy',
              Value: 0,
              To: 81,
              HostNetwork: 'default',
            },
          ],
        },
      ],
      Consul: {
        Namespace: '',
      },
      Services: [
        {
          Name: 'agg-report-infra-s3',
          TaskName: '',
          PortLabel: 'agg-report-infra-s3-proxy',
          AddressMode: 'auto',
          Address: '',
          EnableTagOverride: false,
          Tags: [
            'az:${meta.az}',
            'namespace:mikecorns',
            'internal',
            'envoy',
            'http:19200',
            'urlprefix-mikecorns-agg-report-infra-s3.sandbox.dev.dreambox.net/',
            'domain:mikecorns-agg-report-infra-s3.sandbox.dev.dreambox.net',
            'timeout:1m',
            'idle_timeout:1m',
          ],
          CanaryTags: null,
          Checks: [
            {
              Name: 'alive',
              Type: 'tcp',
              Command: '',
              Args: null,
              Path: '',
              Protocol: '',
              PortLabel: 'agg-report-infra-s3-proxy',
              Expose: false,
              AddressMode: '',
              Interval: 20000000000,
              Timeout: 3000000000,
              InitialStatus: 'warning',
              TLSSkipVerify: false,
              Method: '',
              Header: null,
              CheckRestart: {
                Limit: 3,
                Grace: 60000000000,
                IgnoreWarnings: true,
              },
              GRPCService: '',
              GRPCUseTLS: false,
              TaskName: '',
              SuccessBeforePassing: 0,
              FailuresBeforeCritical: 0,
              Body: '',
              OnUpdate: 'require_healthy',
            },
            {
              Name: 'agg-report-infra-s3-healthcheck',
              Type: 'http',
              Command: '',
              Args: null,
              Path: '/minio/health/live',
              Protocol: '',
              PortLabel: 'agg-report-infra-s3-proxy',
              Expose: false,
              AddressMode: '',
              Interval: 15000000000,
              Timeout: 45000000000,
              InitialStatus: 'warning',
              TLSSkipVerify: false,
              Method: 'GET',
              Header: {
                Host: ['agg-report-infra-s3'],
              },
              CheckRestart: {
                Limit: 3,
                Grace: 60000000000,
                IgnoreWarnings: true,
              },
              GRPCService: '',
              GRPCUseTLS: false,
              TaskName: '',
              SuccessBeforePassing: 0,
              FailuresBeforeCritical: 0,
              Body: '',
              OnUpdate: 'require_healthy',
            },
          ],
          Connect: null,
          Meta: {
            GIT_REPO_URL:
              'git@bitbucket.org:dreamboxlearning/dbl-agg-report.git',
            STACK: 'agg-report-infra',
            namespace: 'mikecorns',
            GIT_COMMIT_SHA: '50e68df4b1305f10d8ebed942b07fcb7d0bce7df',
            GIT_REF: 'main',
          },
          CanaryMeta: null,
          Namespace: 'default',
          OnUpdate: 'require_healthy',
          Provider: 'consul',
        },
      ],
      Volumes: {
        infra_default_efs: {
          Name: '',
          Type: 'host',
          Source: 'infra_default_efs',
          ReadOnly: false,
          AccessMode: '',
          AttachmentMode: '',
          MountOptions: null,
          PerAlloc: false,
        },
      },
      ShutdownDelay: 10000000000,
      StopAfterClientDisconnect: null,
      MaxClientDisconnect: null,
    },
  ],
  Update: {
    Stagger: 30000000000,
    MaxParallel: 1,
    HealthCheck: '',
    MinHealthyTime: 0,
    HealthyDeadline: 0,
    ProgressDeadline: 0,
    AutoRevert: false,
    AutoPromote: false,
    Canary: 0,
  },
  Multiregion: null,
  Periodic: null,
  ParameterizedJob: null,
  Dispatched: false,
  DispatchIdempotencyToken: '',
  Payload: null,
  Meta: null,
  ConsulToken: '',
  ConsulNamespace: '',
  VaultToken: '',
  VaultNamespace: '',
  NomadTokenID: '',
  Status: 'running',
  StatusDescription: '',
  Stable: true,
  Version: 1,
  SubmitTime: 1664807936291869400,
  CreateIndex: 809535522,
  ModifyIndex: 813957169,
  JobModifyIndex: 809537203,
});

module('Acceptance | evaluations list', function (hooks) {
  setupApplicationTest(hooks);
  setupMirage(hooks);

  test('it passes an accessibility audit', async function (assert) {
    assert.expect(2);

    await visit('/jobs');

    assert.equal(currentRouteName(), 'jobs.index', 'blah blah blah');

    await a11yAudit(assert);
  });

  test('it reproduces the bug', async function (assert) {
    assert.expect(2);
    server.get('/jobs', function () {
      return getStandardRes();
    });

    server.get('/namespaces', function () {
      return getNamespace();
    });

    server.get('/job/mikecorns-agg-report-infra', function () {
      return getJob();
    });

    server.get('/job/mikecorns-agg-report-infra/allocations', function () {
      return getAllocations();
    });

    server.get('/node/e70c04d5-318c-ce97-261c-4b6982095383', function () {
      return {
        Attributes: {
          'nomad.advertise.address': '10.179.178.63:4646',
          'driver.docker.version': '20.10.7',
          'unique.storage.volume': '/dev/nvme0n1p1',
          'vault.cluster_name': 'vault-cluster-19ae8911',
          'kernel.version': '4.14.262-200.489.amzn2.x86_64',
          'unique.platform.aws.mac': '0e:9a:f2:1b:fe:b3',
          'driver.docker': '1',
          'platform.aws.instance-type': 'm5.4xlarge',
          'driver.docker.volumes.enabled': 'true',
          'unique.hostname': 'ip-10-179-178-63.us-west-2.compute.internal',
          'cpu.arch': 'amd64',
          'unique.storage.bytesfree': '50891067392',
          'vault.version': '1.9.3',
          'vault.cluster_id': '4a41b2b0-abd1-89d0-3d6f-7f2bdfbc81c0',
          'unique.storage.bytestotal': '53674487808',
          'cpu.frequency': '3100',
          'os.name': 'amazon',
          'driver.docker.runtimes':
            'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
          'vault.accessible': 'true',
          'consul.sku': 'oss',
          'os.version': '2',
          'consul.datacenter': 'sandbox',
          'consul.grpc': '8502',
          'driver.docker.privileged.enabled': 'true',
          'consul.version': '1.12.0',
          'memory.totalbytes': '66711523328',
          'cpu.totalcompute': '49600',
          'unique.consul.name': 'ip-10-179-178-63.us-west-2.compute.internal',
          'driver.exec': '1',
          'platform.aws.placement.availability-zone': 'us-west-2d',
          'consul.connect': 'true',
          'driver.docker.bridge_ip': '172.17.0.1',
          'os.signals':
            'SIGALRM,SIGBUS,SIGINT,SIGIOT,SIGPIPE,SIGABRT,SIGFPE,SIGPROF,SIGTTIN,SIGXCPU,SIGXFSZ,SIGCONT,SIGTRAP,SIGTSTP,SIGUSR2,SIGSEGV,SIGUSR1,SIGHUP,SIGTERM,SIGKILL,SIGSTOP,SIGILL,SIGIO,SIGWINCH,SIGNULL,SIGQUIT,SIGSYS,SIGTTOU',
          'kernel.name': 'linux',
          'consul.ft.namespaces': 'false',
          'consul.revision': '09a8cdb4',
          'cpu.numcores': '16',
          'unique.platform.aws.local-hostname':
            'ip-10-179-178-63.us-west-2.compute.internal',
          'unique.cgroup.version': 'v1',
          'cpu.modelname': 'Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz',
          'kernel.arch': 'x86_64',
          'platform.aws.ami-id': 'ami-0fe8ab129964ad5c6',
          'unique.platform.aws.hostname':
            'ip-10-179-178-63.us-west-2.compute.internal',
          'unique.platform.aws.local-ipv4': '10.179.178.63',
          'consul.server': 'false',
          'unique.network.ip-address': '10.179.178.63',
          'nomad.revision': '428b2cd8014c48ee9eae23f02712b7219da16d30',
          'platform.aws.instance-life-cycle': 'spot',
          'unique.platform.aws.instance-id': 'i-0fc29509bf7c52dc3',
          'nomad.service_discovery': 'true',
          'driver.docker.os_type': 'linux',
          'nomad.version': '1.3.3',
          'unique.cgroup.mountpoint': '/sys/fs/cgroup/systemd',
        },
        CSIControllerPlugins: null,
        CSINodePlugins: null,
        CgroupParent: '/nomad',
        ComputedClass: 'v1:4994118932587866689',
        CreateIndex: 813853213,
        Datacenter: 'sandbox',
        Drain: false,
        DrainStrategy: null,
        Drivers: {
          qemu: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-05T16:53:41.979141729Z',
          },
          exec: {
            Attributes: {
              'driver.exec': 'true',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-05T16:53:41.979160205Z',
          },
          java: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-05T16:53:41.979268212Z',
          },
          docker: {
            Attributes: {
              'driver.docker.privileged.enabled': 'true',
              'driver.docker.volumes.enabled': 'true',
              'driver.docker.bridge_ip': '172.17.0.1',
              'driver.docker.runtimes':
                'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
              'driver.docker.os_type': 'linux',
              'driver.docker': 'true',
              'driver.docker.version': '20.10.7',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-05T16:53:41.996900921Z',
          },
          raw_exec: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: 'disabled',
            UpdateTime: '2022-10-05T16:53:41.979138876Z',
          },
        },
        Events: [
          {
            Message: 'Node registered',
            Subsystem: 'Cluster',
            Details: null,
            Timestamp: '2022-10-05T16:53:41Z',
            CreateIndex: 0,
          },
          {
            Message: 'Node drain strategy set',
            Subsystem: 'Drain',
            Details: null,
            Timestamp: '2022-10-05T17:40:21.089759702Z',
            CreateIndex: 813954073,
          },
          {
            Message: 'Node drain complete',
            Subsystem: 'Drain',
            Details: null,
            Timestamp: '2022-10-05T17:40:22.460394139Z',
            CreateIndex: 813954179,
          },
          {
            Message: 'Node heartbeat missed',
            Subsystem: 'Cluster',
            Details: null,
            Timestamp: '2022-10-05T17:42:25.19770457Z',
            CreateIndex: 813957018,
          },
        ],
        HTTPAddr: '10.179.178.63:4646',
        HostNetworks: null,
        HostVolumes: {
          infra_default_efs: {
            Name: 'infra_default_efs',
            Path: '/mnt/infra',
            ReadOnly: false,
          },
        },
        ID: 'e70c04d5-318c-ce97-261c-4b6982095383',
        LastDrain: {
          StartedAt: '2022-10-05T17:40:21Z',
          UpdatedAt: '2022-10-05T17:40:22Z',
          Status: 'complete',
          AccessorID: '',
          Meta: null,
        },
        Links: {
          consul: 'sandbox.ip-10-179-178-63.us-west-2.compute.internal',
          'aws.ec2': 'us-west-2d.i-0fc29509bf7c52dc3',
        },
        Meta: {
          variant: 'infra',
          ec2_dns: '10.179.0.2',
          az: 'us-west-2d',
          module: 'nomad-client',
          'connect.sidecar_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          'connect.gateway_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          'connect.proxy_concurrency': '1',
          'connect.log_level': 'info',
          environment: 'sandbox',
        },
        ModifyIndex: 813957018,
        Name: 'i-0fc29509bf7c52dc3',
        NodeClass: 'infra',
        NodeResources: {
          Cpu: {
            CpuShares: 49600,
            TotalCpuCores: 16,
            ReservableCpuCores: [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,
            ],
          },
          Memory: {
            MemoryMB: 63621,
          },
          Disk: {
            DiskMB: 48533,
          },
          Devices: null,
          NodeNetworks: [
            {
              Mode: 'bridge',
              Device: '',
              MacAddress: '',
              Speed: 0,
              Addresses: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              MacAddress: '0e:9a:f2:1b:fe:b3',
              Speed: 1000,
              Addresses: [
                {
                  Family: 'ipv4',
                  Alias: 'default',
                  Address: '10.179.178.63',
                  ReservedPorts: '',
                  Gateway: '',
                },
              ],
            },
          ],
          Networks: [
            {
              Mode: 'bridge',
              Device: '',
              CIDR: '',
              IP: '',
              Hostname: '',
              MBits: 0,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.178.63/32',
              IP: '10.179.178.63',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.178.63/32',
              IP: '10.179.178.63',
              Hostname: '',
              MBits: 2000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          MinDynamicPort: 20000,
          MaxDynamicPort: 32000,
        },
        Reserved: {
          CPU: 0,
          Cores: 0,
          MemoryMB: 0,
          MemoryMaxMB: 0,
          DiskMB: 0,
          IOPS: 0,
          Networks: null,
          Devices: null,
        },
        ReservedResources: {
          Cpu: {
            CpuShares: 0,
            ReservedCpuCores: null,
          },
          Memory: {
            MemoryMB: 0,
          },
          Disk: {
            DiskMB: 0,
          },
          Networks: {
            ReservedHostPorts: '',
          },
        },
        Resources: {
          CPU: 49600,
          Cores: 0,
          MemoryMB: 63621,
          MemoryMaxMB: 0,
          DiskMB: 48533,
          IOPS: 0,
          Networks: [
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.178.63/32',
              IP: '10.179.178.63',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          Devices: null,
        },
        SchedulingEligibility: 'ineligible',
        SecretID: '',
        Status: 'down',
        StatusDescription: '',
        StatusUpdatedAt: 1664991745,
        TLSEnabled: false,
      };
    });

    server.get('/node/30a6fcff-8809-b522-5771-c149bf7767ab', function () {
      return {
        Attributes: {
          'unique.cgroup.version': 'v1',
          'vault.cluster_name': 'vault-cluster-19ae8911',
          'driver.docker.os_type': 'linux',
          'consul.sku': 'oss',
          'unique.network.ip-address': '10.179.159.45',
          'os.version': '2',
          'nomad.service_discovery': 'true',
          'consul.connect': 'true',
          'driver.docker.privileged.enabled': 'true',
          'driver.docker.bridge_ip': '172.17.0.1',
          'nomad.version': '1.3.3',
          'unique.platform.aws.hostname':
            'ip-10-179-159-45.us-west-2.compute.internal',
          'unique.hostname': 'ip-10-179-159-45.us-west-2.compute.internal',
          'unique.platform.aws.instance-id': 'i-0a35043b02c1c3f47',
          'platform.aws.ami-id': 'ami-0fe8ab129964ad5c6',
          'unique.platform.aws.mac': '02:8d:64:4c:76:b3',
          'cpu.modelname': 'Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz',
          'consul.ft.namespaces': 'false',
          'os.signals':
            'SIGSYS,SIGUSR1,SIGPROF,SIGTSTP,SIGALRM,SIGFPE,SIGINT,SIGCONT,SIGTERM,SIGABRT,SIGIOT,SIGSTOP,SIGPIPE,SIGSEGV,SIGNULL,SIGHUP,SIGILL,SIGXCPU,SIGTTIN,SIGTTOU,SIGWINCH,SIGXFSZ,SIGBUS,SIGKILL,SIGQUIT,SIGIO,SIGTRAP,SIGUSR2',
          'cpu.totalcompute': '12400',
          'memory.totalbytes': '33243410432',
          'consul.datacenter': 'sandbox',
          'kernel.version': '4.14.262-200.489.amzn2.x86_64',
          'cpu.frequency': '3100',
          'driver.docker.runtimes':
            'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
          'platform.aws.placement.availability-zone': 'us-west-2b',
          'unique.consul.name': 'ip-10-179-159-45.us-west-2.compute.internal',
          'vault.cluster_id': '4a41b2b0-abd1-89d0-3d6f-7f2bdfbc81c0',
          'kernel.arch': 'x86_64',
          'vault.accessible': 'true',
          'unique.storage.bytesfree': '50486960128',
          'cpu.numcores': '4',
          'vault.version': '1.9.3',
          'os.name': 'amazon',
          'unique.platform.aws.local-hostname':
            'ip-10-179-159-45.us-west-2.compute.internal',
          'driver.docker.version': '20.10.7',
          'unique.platform.aws.local-ipv4': '10.179.159.45',
          'unique.cgroup.mountpoint': '/sys/fs/cgroup/systemd',
          'nomad.advertise.address': '10.179.159.45:4646',
          'cpu.arch': 'amd64',
          'driver.exec': '1',
          'driver.docker.volumes.enabled': 'true',
          'unique.storage.volume': '/dev/nvme0n1p1',
          'platform.aws.instance-life-cycle': 'spot',
          'consul.server': 'false',
          'kernel.name': 'linux',
          'platform.aws.instance-type': 'r5d.xlarge',
          'consul.grpc': '8502',
          'unique.storage.bytestotal': '53674487808',
          'nomad.revision': '428b2cd8014c48ee9eae23f02712b7219da16d30',
          'driver.docker': '1',
          'consul.version': '1.12.0',
          'consul.revision': '09a8cdb4',
        },
        CSIControllerPlugins: null,
        CSINodePlugins: null,
        CgroupParent: '/nomad',
        ComputedClass: 'v1:9887180187414097154',
        CreateIndex: 813957133,
        Datacenter: 'sandbox',
        Drain: false,
        DrainStrategy: null,
        Drivers: {
          qemu: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-05T17:42:34.112176303Z',
          },
          raw_exec: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: 'disabled',
            UpdateTime: '2022-10-05T17:42:34.112215091Z',
          },
          exec: {
            Attributes: {
              'driver.exec': 'true',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-05T17:42:34.112320398Z',
          },
          java: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-05T17:42:34.112375487Z',
          },
          docker: {
            Attributes: {
              'driver.docker': 'true',
              'driver.docker.version': '20.10.7',
              'driver.docker.privileged.enabled': 'true',
              'driver.docker.volumes.enabled': 'true',
              'driver.docker.bridge_ip': '172.17.0.1',
              'driver.docker.runtimes':
                'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
              'driver.docker.os_type': 'linux',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-05T17:42:34.141263147Z',
          },
        },
        Events: [
          {
            Message: 'Node registered',
            Subsystem: 'Cluster',
            Details: null,
            Timestamp: '2022-10-05T17:42:34Z',
            CreateIndex: 0,
          },
        ],
        HTTPAddr: '10.179.159.45:4646',
        HostNetworks: null,
        HostVolumes: {
          infra_default_efs: {
            Name: 'infra_default_efs',
            Path: '/mnt/infra',
            ReadOnly: false,
          },
        },
        ID: '30a6fcff-8809-b522-5771-c149bf7767ab',
        LastDrain: null,
        Links: {
          'aws.ec2': 'us-west-2b.i-0a35043b02c1c3f47',
          consul: 'sandbox.ip-10-179-159-45.us-west-2.compute.internal',
        },
        Meta: {
          'connect.proxy_concurrency': '1',
          environment: 'sandbox',
          ec2_dns: '10.179.0.2',
          module: 'nomad-client',
          az: 'us-west-2b',
          variant: 'infra',
          'connect.gateway_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          'connect.sidecar_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          'connect.log_level': 'info',
        },
        ModifyIndex: 813957205,
        Name: 'i-0a35043b02c1c3f47',
        NodeClass: 'infra',
        NodeResources: {
          Cpu: {
            CpuShares: 12400,
            TotalCpuCores: 4,
            ReservableCpuCores: [0, 1, 2, 3],
          },
          Memory: {
            MemoryMB: 31703,
          },
          Disk: {
            DiskMB: 48148,
          },
          Devices: null,
          NodeNetworks: [
            {
              Mode: 'bridge',
              Device: '',
              MacAddress: '',
              Speed: 0,
              Addresses: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              MacAddress: '02:8d:64:4c:76:b3',
              Speed: 1000,
              Addresses: [
                {
                  Family: 'ipv4',
                  Alias: 'default',
                  Address: '10.179.159.45',
                  ReservedPorts: '',
                  Gateway: '',
                },
              ],
            },
          ],
          Networks: [
            {
              Mode: 'bridge',
              Device: '',
              CIDR: '',
              IP: '',
              Hostname: '',
              MBits: 0,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.159.45/32',
              IP: '10.179.159.45',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.159.45/32',
              IP: '10.179.159.45',
              Hostname: '',
              MBits: 750,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          MinDynamicPort: 20000,
          MaxDynamicPort: 32000,
        },
        Reserved: {
          CPU: 0,
          Cores: 0,
          MemoryMB: 0,
          MemoryMaxMB: 0,
          DiskMB: 0,
          IOPS: 0,
          Networks: null,
          Devices: null,
        },
        ReservedResources: {
          Cpu: {
            CpuShares: 0,
            ReservedCpuCores: null,
          },
          Memory: {
            MemoryMB: 0,
          },
          Disk: {
            DiskMB: 0,
          },
          Networks: {
            ReservedHostPorts: '',
          },
        },
        Resources: {
          CPU: 12400,
          Cores: 0,
          MemoryMB: 31703,
          MemoryMaxMB: 0,
          DiskMB: 48148,
          IOPS: 0,
          Networks: [
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.159.45/32',
              IP: '10.179.159.45',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          Devices: null,
        },
        SchedulingEligibility: 'eligible',
        SecretID: '',
        Status: 'ready',
        StatusDescription: '',
        StatusUpdatedAt: 1664991761,
        TLSEnabled: false,
      };
    });

    server.get('/node/9f55cee3-8804-f113-059a-d4bce293a422', function () {
      return {
        Attributes: {
          'unique.hostname': 'ip-10-179-147-60.us-west-2.compute.internal',
          'driver.docker.os_type': 'linux',
          'cpu.arch': 'amd64',
          'platform.aws.placement.availability-zone': 'us-west-2b',
          'nomad.advertise.address': '10.179.147.60:4646',
          'nomad.revision': '428b2cd8014c48ee9eae23f02712b7219da16d30',
          'unique.storage.volume': '/dev/nvme0n1p1',
          'consul.datacenter': 'sandbox',
          'consul.ft.namespaces': 'false',
          'os.version': '2',
          'driver.docker.privileged.enabled': 'true',
          'kernel.name': 'linux',
          'kernel.arch': 'x86_64',
          'unique.platform.aws.hostname':
            'ip-10-179-147-60.us-west-2.compute.internal',
          'platform.aws.instance-life-cycle': 'spot',
          'os.signals':
            'SIGALRM,SIGKILL,SIGABRT,SIGPROF,SIGBUS,SIGTERM,SIGTTOU,SIGXCPU,SIGCONT,SIGINT,SIGIOT,SIGSEGV,SIGUSR1,SIGFPE,SIGSYS,SIGUSR2,SIGIO,SIGPIPE,SIGTRAP,SIGWINCH,SIGILL,SIGTSTP,SIGHUP,SIGQUIT,SIGSTOP,SIGTTIN,SIGXFSZ,SIGNULL',
          'unique.consul.name': 'ip-10-179-147-60.us-west-2.compute.internal',
          'driver.docker.bridge_ip': '172.17.0.1',
          'vault.version': '1.9.3',
          'consul.revision': '09a8cdb4',
          'vault.cluster_id': '4a41b2b0-abd1-89d0-3d6f-7f2bdfbc81c0',
          'nomad.service_discovery': 'true',
          'driver.docker.runtimes':
            'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
          'vault.cluster_name': 'vault-cluster-19ae8911',
          'platform.aws.ami-id': 'ami-0fe8ab129964ad5c6',
          'unique.cgroup.mountpoint': '/sys/fs/cgroup/systemd',
          'platform.aws.instance-type': 'r5dn.xlarge',
          'unique.network.ip-address': '10.179.147.60',
          'consul.version': '1.12.0',
          'unique.storage.bytestotal': '53674487808',
          'consul.connect': 'true',
          'unique.cgroup.version': 'v1',
          'consul.server': 'false',
          'cpu.modelname': 'Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz',
          'consul.grpc': '8502',
          'unique.storage.bytesfree': '50891268096',
          'memory.totalbytes': '33243410432',
          'vault.accessible': 'true',
          'unique.platform.aws.mac': '02:ab:03:8f:65:c1',
          'unique.platform.aws.local-hostname':
            'ip-10-179-147-60.us-west-2.compute.internal',
          'unique.platform.aws.local-ipv4': '10.179.147.60',
          'unique.platform.aws.instance-id': 'i-0e24ba4d1d2e063b8',
          'cpu.totalcompute': '12400',
          'driver.exec': '1',
          'consul.sku': 'oss',
          'driver.docker.volumes.enabled': 'true',
          'nomad.version': '1.3.3',
          'cpu.frequency': '3100',
          'kernel.version': '4.14.262-200.489.amzn2.x86_64',
          'os.name': 'amazon',
          'cpu.numcores': '4',
          'driver.docker.version': '20.10.7',
          'driver.docker': '1',
        },
        CSIControllerPlugins: null,
        CSINodePlugins: null,
        CgroupParent: '/nomad',
        ComputedClass: 'v1:9540654379937655997',
        CreateIndex: 809536378,
        Datacenter: 'sandbox',
        Drain: false,
        DrainStrategy: null,
        Drivers: {
          docker: {
            Attributes: {
              'driver.docker.bridge_ip': '172.17.0.1',
              'driver.docker.runtimes':
                'io.containerd.runc.v2,io.containerd.runtime.v1.linux,runc',
              'driver.docker.os_type': 'linux',
              'driver.docker': 'true',
              'driver.docker.version': '20.10.7',
              'driver.docker.privileged.enabled': 'true',
              'driver.docker.volumes.enabled': 'true',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-03T14:37:51.943547807Z',
          },
          qemu: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-03T14:37:51.914573688Z',
          },
          java: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: '',
            UpdateTime: '2022-10-03T14:37:51.914715066Z',
          },
          exec: {
            Attributes: {
              'driver.exec': 'true',
            },
            Detected: true,
            Healthy: true,
            HealthDescription: 'Healthy',
            UpdateTime: '2022-10-03T14:37:51.914773421Z',
          },
          raw_exec: {
            Attributes: null,
            Detected: false,
            Healthy: false,
            HealthDescription: 'disabled',
            UpdateTime: '2022-10-03T14:37:51.914785866Z',
          },
        },
        Events: [
          {
            Message: 'Node registered',
            Subsystem: 'Cluster',
            Details: null,
            Timestamp: '2022-10-03T14:37:51Z',
            CreateIndex: 0,
          },
          {
            Message: 'Node drain strategy set',
            Subsystem: 'Drain',
            Details: null,
            Timestamp: '2022-10-05T17:37:21.035513586Z',
            CreateIndex: 813949296,
          },
          {
            Message: 'Node drain complete',
            Subsystem: 'Drain',
            Details: null,
            Timestamp: '2022-10-05T17:37:22.145646635Z',
            CreateIndex: 813949330,
          },
          {
            Message: 'Node heartbeat missed',
            Subsystem: 'Cluster',
            Details: null,
            Timestamp: '2022-10-05T17:39:28.407602288Z',
            CreateIndex: 813951759,
          },
        ],
        HTTPAddr: '10.179.147.60:4646',
        HostNetworks: null,
        HostVolumes: {
          infra_default_efs: {
            Name: 'infra_default_efs',
            Path: '/mnt/infra',
            ReadOnly: false,
          },
        },
        ID: '9f55cee3-8804-f113-059a-d4bce293a422',
        LastDrain: {
          StartedAt: '2022-10-05T17:37:21Z',
          UpdatedAt: '2022-10-05T17:37:22Z',
          Status: 'complete',
          AccessorID: '',
          Meta: null,
        },
        Links: {
          'aws.ec2': 'us-west-2b.i-0e24ba4d1d2e063b8',
          consul: 'sandbox.ip-10-179-147-60.us-west-2.compute.internal',
        },
        Meta: {
          az: 'us-west-2b',
          environment: 'sandbox',
          variant: 'infra',
          'connect.gateway_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          'connect.proxy_concurrency': '1',
          'connect.sidecar_image': 'envoyproxy/envoy:v${NOMAD_envoy_version}',
          module: 'nomad-client',
          ec2_dns: '10.179.0.2',
          'connect.log_level': 'info',
        },
        ModifyIndex: 813951759,
        Name: 'i-0e24ba4d1d2e063b8',
        NodeClass: 'infra',
        NodeResources: {
          Cpu: {
            CpuShares: 12400,
            TotalCpuCores: 4,
            ReservableCpuCores: [0, 1, 2, 3],
          },
          Memory: {
            MemoryMB: 31703,
          },
          Disk: {
            DiskMB: 48533,
          },
          Devices: null,
          NodeNetworks: [
            {
              Mode: 'bridge',
              Device: '',
              MacAddress: '',
              Speed: 0,
              Addresses: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              MacAddress: '02:ab:03:8f:65:c1',
              Speed: 1000,
              Addresses: [
                {
                  Family: 'ipv4',
                  Alias: 'default',
                  Address: '10.179.147.60',
                  ReservedPorts: '',
                  Gateway: '',
                },
              ],
            },
          ],
          Networks: [
            {
              Mode: 'bridge',
              Device: '',
              CIDR: '',
              IP: '',
              Hostname: '',
              MBits: 0,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.147.60/32',
              IP: '10.179.147.60',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.147.60/32',
              IP: '10.179.147.60',
              Hostname: '',
              MBits: 750,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          MinDynamicPort: 20000,
          MaxDynamicPort: 32000,
        },
        Reserved: {
          CPU: 0,
          Cores: 0,
          MemoryMB: 0,
          MemoryMaxMB: 0,
          DiskMB: 0,
          IOPS: 0,
          Networks: null,
          Devices: null,
        },
        ReservedResources: {
          Cpu: {
            CpuShares: 0,
            ReservedCpuCores: null,
          },
          Memory: {
            MemoryMB: 0,
          },
          Disk: {
            DiskMB: 0,
          },
          Networks: {
            ReservedHostPorts: '',
          },
        },
        Resources: {
          CPU: 12400,
          Cores: 0,
          MemoryMB: 31703,
          MemoryMaxMB: 0,
          DiskMB: 48533,
          IOPS: 0,
          Networks: [
            {
              Mode: 'host',
              Device: 'eth0',
              CIDR: '10.179.147.60/32',
              IP: '10.179.147.60',
              Hostname: '',
              MBits: 1000,
              DNS: null,
              ReservedPorts: null,
              DynamicPorts: null,
            },
          ],
          Devices: null,
        },
        SchedulingEligibility: 'ineligible',
        SecretID: '',
        Status: 'down',
        StatusDescription: '',
        StatusUpdatedAt: 1664991568,
        TLSEnabled: false,
      };
    });

    await visit('/jobs/mikecorns-agg-report-infra/allocations');
    await this.pauseTest();

    await percySnapshot(assert);

    assert
      .dom('[data-test-eval-table]')
      .exists('Evaluations table should render');
    assert
      .dom('[data-test-evaluation]')
      .exists({ count: 4 }, 'Should render the correct number of evaluations');
  });
});
